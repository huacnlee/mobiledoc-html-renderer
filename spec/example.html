<div><h2>Mobiledoc</h2><p>Mobiledoc is a <strong><em>simple</em></strong> post or article format that aims to be:</p><ul><li><strong>Platform agnostic</strong>. Should be possible to render without an HTML parser.</li><li><strong>Efficient to transfer</strong>. Compresses well, and limits the duplication of content.</li><li><strong>Extensible at runtime</strong>. Stores content, not layout or final display.</li></ul><p>Mobiledoc is primarily intended to be used for news-related content such as articles and blog posts. It is deliberately simple, and organizes its content in an array of "sections" that are considered as individual blocks of content.</p><p>There is no concept of layout or design built into Mobiledoc. It is up to the renderer to generate a display appropriate for its context. On mobile this may mean each section is full-width and they are displayed sequentially. On larger displays the sections may be rendered side-by-side. Mobiledoc makes no prescription for output display.</p><h2>Usage</h2><p>Often Mobiledoc will be used with one or more of:</p><ul><li><a href="https://github.com/bustle/mobiledoc-kit">Mobiledoc Kit</a> to author an editor<a href="https://github.com/bustle/ember-mobiledoc-editor">Ember Mobiledoc Editor</a> is one such editor</li><li><a href="https://github.com/bustle/mobiledoc-dom-renderer">Mobiledoc DOM Renderer</a></li><li><a href="https://github.com/bustle/mobiledoc-html-renderer">Mobiledoc HTML Renderer</a></li><li><a href="https://github.com/bustle/mobiledoc-text-renderer">Mobiledoc Text Renderer</a></li></ul><h2>Specification</h2><p>Mobiledoc consists of a wrapping object, type definitions for markup, atoms and cards, and an array of section data. Markup, atoms and cards are referenced (one or more times) from within section data by array index. Using arrays makes Mobiledocs each to render quickly.</p><p>The wrapper signature:</p><h3>Signatures</h3><p><strong>Markup definition signature</strong></p><p>Markups have a tagName and an optional array of attributes. Not all markups can have attributes, but for those that do the attributes array is a <em>single</em> array of all the attribute names and values, one after another. E.g., ["a", ["href", "http://bustle.com", "target", "_blank"].</p><p><strong>Atom definition signature</strong></p><p>Atoms have a name, text value and arbitrary payload.</p><p><strong>Card definition signature</strong></p><p>Cards have a name and arbitrary payload.</p><p><strong>Section definition signature</strong></p><p>Sections have an identifier and other values depending on their type. See <em>Sections</em>.</p><p><strong>Marker definition signature</strong></p><p>The text of a document is held in markers which signal where markup and atoms apply. Markers are used in text and list sections.</p><h2>Markers</h2><p>Opening and closing of markups are tracked by markers. They are expected to be balanced for a valid document. Opening markups are specificed by referencing the markups array in the document by index. Markups are closed in the order they are opened, in the quantity specified in the marker.</p><p>The index in openMarkupsIndex specifies which markups should be opened at the start of the value text. As these tags are opened, then create a stack of opened markups. value has the open markups from all previous markers (that are unclosed) and its own marker applied. The numberOfClosedMarkups says how many of those opened markup tags should be closed at the end of a value. Markups closed in this marker will not be applied to the next marker value.</p><p>There are two types of markers, identified with the following numbers:</p><ul><li>0 - Text</li><li>1 - Atom</li></ul><p><strong>Text marker</strong></p><p>value is plain text</p><p><strong>Atom marker</strong></p><p>value is an index reference to the atoms array in the document. How markups are applied to atoms is left to the renderer. If an atom is present in Mobiledoc but no atom implementation is registered, the text value of the atom will be rendered as plain text as a fallback.</p><h2>Markup</h2><p>General text decorations are given by markup. A markup definition array's first item (the markup tagName) must be one of:</p><ul><li>a - Hypertext link</li><li>b - Bold</li><li>code - Code</li><li>em - Emphasis</li><li>i - Italic</li><li>s - Strike-through</li><li>strong - Strong</li><li>sub - Subscript</li><li>sup - Superscript</li><li>u - Underline</li></ul><p>Attributes are specified in pairs in an array after the markup name. Where a markup is used with different attributes, that markup will have to be in the markup list for each unique set of attributes.</p><p><strong>Hypertext link</strong></p><p>An href attribute is expected with this markup.</p><h2>Sections</h2><p>There are four section types. Each section has a different signature dependent on it's type. Sections are identified with the following numbers:</p><ul><li>1 - Markup (Text)</li><li>2 - Image</li><li>3 - List</li><li>10 - Card</li></ul><p><em>Section identifiers 4 through 9 are reserved for future use</em></p><p><strong>Markup Section</strong></p><p>Markup sections, in addition to plain text, can include markups and atoms.</p><p>A section tagName must be one of:</p><ul><li>aside</li><li>blockquote</li><li>h1 - Heading 1</li><li>h2</li><li>h3</li><li>h4</li><li>h5</li><li>h6</li><li>p - Paragraph</li></ul><p><strong>Image section</strong></p><p>Renders an image. In many scenarios, a card to suit your needs is better.</p><p><strong>List section</strong></p><p>List similar to markup sections but have a set of markers for each list item.</p><p>A section tagName must be one of:</p><ul><li>ul - Unordered list</li><li>ol - Ordered list</li></ul><p><strong>Card Section</strong></p><p>cardPayload is arbitrary and should be passed through to the card implementation.</p></div>